using UnityEngine;






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































   
using System.Collections;

public class Manager : MonoBehaviour {     

    public int Paze = 1;
    public bool matchmonster = false;
    bool offsets = true;
    bool touch_ = false;
    bool movepaze = false;
    public Vector2 ab = new Vector2(0,0);
    public GameObject meet_t;
    public GameObject getweapon_t;

    public GameObject Paze_1;
    public GameObject Paze_2;
    public GameObject Paze_3;
    public GameObject Paze_4;
    public GameObject Paze_5;
    public GameObject Paze_6;

    [Range(0,3)]
    public float speed = 2.5f;

    MeshRenderer _renderer;

    Vector2 _temp;
    Vector2 _temp2;

    public float _time = 0;
    public float _times = 0;

    void Start()
    {
        getweapon_t.SetActive(false);                                
        meet_t.SetActive(false);
        AllPazeOff();
        
        switch(Paze)                                                 // 시작시 알맞는 페이즈를 업로드 
        {
            case 1:
                _renderer = Paze_1.GetComponent<MeshRenderer>();
                 Paze_1.SetActive(true);
                break;
            case 2:
                _renderer = Paze_2.GetComponent<MeshRenderer>();
                Paze_2.SetActive(true);
                break;
            case 3:
                _renderer = Paze_3.GetComponent<MeshRenderer>();
                Paze_3.SetActive(true);
                break;
            case 4:
                _renderer = Paze_4.GetComponent<MeshRenderer>();
                Paze_4.SetActive(true);
                break;
            case 5:
                _renderer = Paze_5.GetComponent<MeshRenderer>();
                Paze_5.SetActive(true);
                break;
            case 6:
                _renderer = Paze_6.GetComponent<MeshRenderer>();
                Paze_6.SetActive(true);
                break;
        }
        _temp = new Vector2(9, 0);
        _temp2 = new Vector2(1.97f, 0);
    }

    void Update()
    {
        if (matchmonster == false && offsets == true)
        {
            if (Paze == 1 || Paze == 3 || Paze == 5)     // 몬스터와의 만남
            {
                if ((ab.x > 2.402f && ab.x < 2.41f) || (ab.x > 3.402f && ab.x < 3.41f) || (ab.x > 4.402f && ab.x < 4.41f) || (ab.x > 5.402f && ab.x < 5.41f) || (ab.x > 6.402f && ab.x < 6.41f) || (ab.x > 7.402f && ab.x < 7.41f) || (ab.x > 8.402f && ab.x < 8.41f))
                {
                    matchmonster = true;
                }
            }
        }
        if (matchmonster == true)
        {
            meet_t.SetActive(true);
        }
        if (Input.GetMouseButton(0))
        {
            if (matchmonster == false)
            {
                meet_t.SetActive(false);
                _time += Time.smoothDeltaTime;

                ab = _renderer.material.GetTextureOffset("_MainTex");

                if (offsets == true)
                {
                    if (ab.x <= _temp.x)  // offset 돌아가게해줌 
                    {
                        Debug.Log(ab.x);
                        float offset = _time * speed;
                        _renderer.material.SetTextureOffset("_MainTex", new Vector2(offset, 0));

                       
                        if (Paze == 3 && (_time > 2.5f && _time < 2.53f))    // 무기획득 
                        {
                            getweapon();               // 무 기관련 함수 호출 
                            getweapon_t.SetActive(true);
                        }
                        else
                        {
                            getweapon_t.SetActive(false);
                            // movePaze();
                        }
                    }
                    else
                    {
                        offsets = false;
                        movepaze = true;
                        Debug.Log("asdf");

                    }
                }

               
                if (movepaze == true)
                {
                    switch (Paze)
                    {
                        case 1:
                            Paze_2.SetActive(true);
                            Paze_1.transform.position = Vector3.MoveTowards(new Vector3(54, 0, 10), new Vector3(-20, 0, 10), _time * speed * 6);
                            Paze_2.transform.position = Vector3.MoveTowards(new Vector3(73, 0, 10), new Vector3(-0.5f, 0, 10), _time * speed * 6);
                            _times += Time.smoothDeltaTime;
                            break;
                        case 2:
                            Paze_3.SetActive(true);
                            Paze_2.transform.position = Vector3.MoveTowards(new Vector3(74, 0, 10), new Vector3(-20, 0, 10), _time * speed * 6);
                            Paze_3.transform.position = Vector3.MoveTowards(new Vector3(93.5f, 0, 10), new Vector3(-0.5f, 0, 10), _time * speed * 6);
                            _times += Time.smoothDeltaTime;

                            break;
                        case 3:
                            Paze_4.SetActive(true);
                            Paze_3.transform.position = Vector3.MoveTowards(new Vector3(81.5f, 0, 10), new Vector3(-20, 0, 10), _time * speed * 9);
                            Paze_4.transform.position = Vector3.MoveTowards(new Vector3(101, 0, 10), new Vector3(-0.5f, 0, 10), _time * speed * 9);
                            _times += Time.smoothDeltaTime;
                            break;
                        case 4:
                            Paze_5.SetActive(true);
                            Paze_4.transform.position = Vector3.MoveTowards(new Vector3(104.2f, 0, 10), new Vector3(-20, 0, 10), _time * speed * 9);
                            Paze_5.transform.position = Vector3.MoveTowards(new Vector3(123.7f, 0, 10), new Vector3(-0.5f, 0, 10), _time * speed * 9);
                            _times += Time.smoothDeltaTime;
                            break;
                        case 5:
                            Paze_6.SetActive(true);
                            Paze_5.transform.position = Vector3.MoveTowards(new Vector3(82.2f, 0, 10), new Vector3(-20, 0, 10), _time * speed * 9);
                            Paze_6.transform.position = Vector3.MoveTowards(new Vector3(101.7f, 0, 10), new Vector3(-0.5f, 0, 10), _time * speed * 9);
                            _times += Time.smoothDeltaTime;
                            break;
                    }

                    //  Debug.Log(_times);
                    if (_times > 7)
                    {

                        switch (Paze)
                        {
                            case 1:
                                _times = 0;
                                Paze = 2;
                                Paze_1.SetActive(false);
                                Debug.Log("1");
                                break;
                            case 2:
                                _times = 2;
                                Paze_2.SetActive(false);
                                _time = 1.97f;
                                movepaze = false;
                                _renderer = Paze_3.GetComponent<MeshRenderer>();
                                _renderer.material.SetTextureOffset("_MainTex", new Vector2(_time, 0));
                                Paze = 3;
                                offsets = true;
                                Debug.Log("2");
                                break;
                            case 3:
                                _times = 2;
                                Paze = 4;
                                Paze_3.SetActive(false);
                                Debug.Log("3");
                                break;
                            case 4:
                                _times = 2;
                                Paze_4.SetActive(false);
                                _time = 1.97f;
                                movepaze = false;
                                _renderer = Paze_5.GetComponent<MeshRenderer>();
                                _renderer.material.SetTextureOffset("_MainTex", new Vector2(_time, 0));
                                Paze = 5;
                                offsets = true;
                                Debug.Log("4");
                                break;
                            case 5:
                                _times = 2;
                                Paze = 6;
                                Paze_5.SetActive(false);
                                Debug.Log("5");
                                break;
                        }
                    }
                }
            }
        }
    }
    void getweapon()             // 무기 함수 
    {

    }
    void AllPazeOff()            // 모든 페이즈를 끔 
    {
        Paze_1.SetActive(false);
        Paze_2.SetActive(false);
        Paze_3.SetActive(false);
        Paze_4.SetActive(false);
        Paze_5.SetActive(false);
        Paze_6.SetActive(false);
    }
  
}
